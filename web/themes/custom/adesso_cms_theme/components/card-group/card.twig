<div class=" bg-card text-card-foreground card h-full flex flex-col">
	{% block card_media %}
		{% if media|default('') %}
			<div class="relative">
				{% if media_link %}
					{# Apply Foundation Link security and accessibility features #}
					{% set is_external = media_link|default('') starts with 'http' and not (media_link|default('') starts with 'https://zh-demo.ddev.site' or media_link|default('') starts with '/') %}
					
					{# Build secure media link attributes #}
					{% set media_link_attributes = {
						'href': media_link|default('')|escape('html_attr'),
						'class': 'block hover:opacity-90 transition-opacity',
						'aria-label': 'View media content'|t
					} %}
					
					{# Add security attributes for external links #}
					{% if is_external %}
						{% set media_link_attributes = media_link_attributes|merge({
							'target': '_blank',
							'rel': 'noopener noreferrer'
						}) %}
					{% endif %}
					
					{# Add data attributes for JavaScript enhancement #}
					{% set media_link_attributes = media_link_attributes|merge({
						'data-adesso-media-link': 'true',
						'data-external': is_external ? 'true' : 'false',
						'data-municipality-compliant': 'true'
					}) %}

					<a{{ attributes(media_link_attributes) }}>
						{{ media|default('') }}
						{% if is_external %}
							<span class="sr-only">{{ 'Opens in new window'|t }}</span>
						{% endif %}
					</a>
				{% else %}
					{{ media|default('') }}
				{% endif %}
			</div>
		{% endif %}
	{% endblock %}

	<div class="flex-grow p-6 {% if body_modifier|default('') %}{{ body_modifier|default('') }}{% endif %}">
		{% if tags|default([]) %}
			<ul class="flex flex-wrap gap-2 mb-4">
				{% for tag in tags %}
					<li class="inline-flex">
						{% include 'adesso_cms_theme:badge' with {
              "tag": tag,
              "modifier": 'bg-secondary text-secondary-foreground hover:bg-secondary/80'
            } only %}
					</li>
				{% endfor %}
			</ul>
		{% endif %}

		<div class="space-y-1.5">
			{%
        include 'adesso_cms_theme:heading' with {
          "heading": {
            "title": heading.title,
            "url": heading.url,
            "modifier": "card-title text-xl font-semibold leading-none tracking-tight"
          }
        } only
      %}
			{% if summary_text %}
				<p class="card-text text-sm text-muted-foreground">
					{{ summary_text }}
				</p>
			{% endif %}
		</div>

		{% if link.url or link2.url %}
			<div class="flex flex-wrap gap-2 mt-6">
				{% if link.url %}
					{% include 'adesso_cms_theme:button' with {
						"url": link.url,
						"text": link.text,
						"icon": 'arrow-right',
						"modifier": ''
          } only %}
				{% endif %}
				{% if link2.url %}
					{% include 'adesso_cms_theme:button' with {
						"url": link2.url,
						"text": link2.text,
						"icon": 'arrow-right',
						"modifier": ''
          } only %}
				{% endif %}
			</div>
		{% endif %}
	</div>
</div>
