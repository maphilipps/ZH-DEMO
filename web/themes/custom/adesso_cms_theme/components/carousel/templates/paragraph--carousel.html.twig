{#
/**
 * @file
 * Carousel paragraph template using paragraph-wrapper component with embed pattern.
 */
#}

{# Carousel paragraph configuration - uses light theme and no spacing by default #}
{% set default_theme = 'light' %}
{% set default_spacing = 'none' %}
{% include '@adesso_cms_theme/_mixins/paragraph-config.twig' %} {# Embed the paragraph-wrapper component using slots #} {% embed
'adesso_cms_theme:paragraph-wrapper' with { theme: wrapper_theme, spacing: wrapper_spacing, tag: wrapper_tag, className:
wrapper_css_class, attributes: attributes } %} {% block prefix %}{% endblock %} {% block content %}
<div class="py-8 px-4 mx-auto container lg:py-16">
  <!-- Title section -->
  {% if content.field_pre_headline or content.field_title %} {% include 'adesso_cms_theme:section-header' with { title:
  content.field_title, pre_headline: content.field_pre_headline, alignment: 'center', title_tag: 'h2', pre_headline_tag:
  'span', title_visual_level: '2', pre_headline_visual_level: '3' } %} {% endif %}

  <!-- Carousel Container with Media Slot Architecture -->
  <div class="max-w-[1536px] mx-auto">
    {% embed 'adesso_cms_theme:carousel' with { 
      cards_per_view: '3', 
      autoplay: false, 
      interval: '5000',
      pause_on_hover: true, 
      class: 'container mx-auto' 
    } only %}
      {% block title %}{{ content.field_title }}{% endblock %}
      {% block pre_headline %}{{ content.field_pre_headline }}{% endblock %}
      {% block carousel_items %}
        {# Process carousel items using slot-based media architecture #}
        {% if content.field_carousel_item %}
          {% for carousel_item in content.field_carousel_item %}
            {% if carousel_item['#paragraph'] %}
              {% set carousel_entity = carousel_item['#paragraph'] %}
              <div class="swiper-slide carousel-slide" 
                   role="group" 
                   aria-roledescription="slide"
                   aria-label="Slide {{ loop.index }} of {{ content.field_carousel_item|length }}"
                   data-slide-index="{{ loop.index0 }}">
                {% embed 'adesso_cms_theme:carousel-item' with {
                  link: { 'url': '', 'title': 'Read more' }
                } only %}
                  {% block title %}{{ carousel_entity.field_title }}{% endblock %}
                  {% block summary %}{{ carousel_entity.field_summary }}{% endblock %}
                  {% block media %}
                    {# Use field template rendering instead of |view|render - PERFORMANCE FIX #}
                    {{ carousel_entity.field_media }}
                  {% endblock %}
                {% endembed %}
              </div>
            {% endif %}
          {% endfor %}
        {% endif %}
      {% endblock %}
    {% endembed %}
  </div>
</div>
{% endblock %} {% endembed %}
