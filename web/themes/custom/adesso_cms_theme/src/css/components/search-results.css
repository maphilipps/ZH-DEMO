/**
 * Municipal Portal Search Results - TailwindCSS v4+ Styling
 * GPZH Gemeinde Bruchtal - "Leben am See" Theme
 * 
 * Features:
 * - WCAG 2.1 AA Compliance (4.5:1 contrast ratios minimum)
 * - Mobile-first responsive design
 * - Swiss government portal standards
 * - Enhanced accessibility with focus indicators
 * - Performance-optimized with CSS containment
 */

/* CSS Variables for Municipal Color Scheme */
:root {
  /* High contrast colors ensuring WCAG 2.1 AA compliance */
  --text-primary: #111827;        /* gray-900 - 19.55:1 on white */
  --text-secondary: #374151;      /* gray-700 - 9.19:1 on white */
  --text-muted: #4b5563;          /* gray-600 - 7.23:1 on white */
  --link-color: #1d4ed8;          /* blue-700 - 5.74:1 on white */
  --link-hover: #1e40af;          /* blue-800 - 7.64:1 on white */
  --link-visited: #7c3aed;        /* violet-600 - 5.93:1 on white */
  
  /* Municipal brand colors */
  --bruchtal-primary: #0891b2;    /* cyan-600 - "Leben am See" theme */
  --bruchtal-secondary: #164e63;   /* cyan-900 - darker accent */
  --bruchtal-light: #67e8f9;      /* cyan-300 - light accent */
  --bruchtal-bg: #f0fdff;         /* cyan-50 - background tint */
}

/* Search Results Container */
.search-results {
  @apply space-y-6 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8;
  contain: layout style;
}

.search-results-header {
  @apply mb-8 pb-6 border-b border-gray-200;
}

.search-results-title {
  @apply text-2xl font-bold text-gray-900 mb-2;
  color: var(--text-primary);
}

.search-results-meta {
  @apply flex items-center justify-between flex-wrap gap-4 text-sm text-gray-600;
  color: var(--text-muted);
}

.search-results-count {
  @apply font-medium;
}

.search-results-sorting {
  @apply flex items-center gap-2;
}

/* Main Search Result Card Foundation */
.search-result-card {
  @apply bg-white rounded-lg shadow-md border border-gray-200;
  @apply p-6 mb-6 transition-all duration-200 ease-in-out;
  @apply hover:shadow-lg hover:border-blue-300;
  @apply focus-within:ring-2 focus-within:ring-blue-500/50;
  
  /* Municipal portal spacing */
  @apply last:mb-0 w-full;
  
  /* Ensure minimum touch targets for accessibility */
  min-height: 120px;
  contain: layout style paint;
}

.search-result-card:hover {
  transform: translateY(-2px);
}

.search-result-card:focus-within {
  outline: none;
}

/* Content Type Badges - Municipal Categories */
.content-type-badge {
  @apply inline-flex items-center px-3 py-1 rounded-full text-sm font-medium;
  @apply transition-colors duration-200 border;
}

/* Gemeinde Bruchtal Municipal Color Scheme */
.badge--club,
.badge--verein {
  @apply bg-blue-100 text-blue-800 border-blue-200;
  /* Vereine - Blue for community organizations */
}

.badge--business,
.badge--firma,
.badge--gewerbe {
  @apply bg-green-100 text-green-800 border-green-200;
  /* Firmen/Gewerbe - Green for businesses */
}

.badge--restaurant,
.badge--gastgewerbe {
  @apply bg-orange-100 text-orange-800 border-orange-200;
  /* Gastgewerbe - Orange for hospitality */
}

.badge--event,
.badge--veranstaltung {
  @apply bg-purple-100 text-purple-800 border-purple-200;
  /* Events - Purple for special occasions */
}

.badge--news,
.badge--nachrichten {
  @apply bg-red-100 text-red-800 border-red-200;
  /* News - Red for announcements */
}

.badge--service,
.badge--dienstleistung {
  @apply bg-cyan-100 text-cyan-800 border-cyan-200;
  /* Municipal services - Cyan for "Leben am See" theme */
}

.badge--infrastructure,
.badge--infrastruktur {
  @apply bg-gray-100 text-gray-800 border-gray-200;
  /* Infrastructure - Gray for municipal infrastructure */
}

/* Relevance Score Display */
.relevance-score {
  @apply flex items-center gap-2 text-sm text-gray-600;
  @apply font-mono bg-gray-50 px-3 py-1 rounded-md;
  @apply border border-gray-200;
  color: var(--text-muted);
}

.score-value {
  @apply font-bold text-gray-800;
  color: var(--text-secondary);
}

.score-label {
  @apply text-xs uppercase tracking-wider text-gray-500;
}

/* Progress bar style relevance indicator */
.relevance-score::before {
  content: '';
  @apply w-12 h-2 bg-gray-200 rounded-full;
  background: linear-gradient(
    to right, 
    var(--bruchtal-primary) var(--score-percentage, 0%), 
    theme('colors.gray.200') var(--score-percentage, 0%)
  );
}

/* Header Layout - Municipal Standards */
.result-header {
  @apply flex items-center justify-between mb-4;
  @apply border-b border-gray-100 pb-3;
}

.result-header .content-type-badge {
  @apply flex-shrink-0;
}

.result-header .relevance-score {
  @apply flex-shrink-0 ml-4;
}

/* Mobile responsive header */
@media (max-width: 640px) {
  .result-header {
    @apply flex-col items-start gap-2;
  }
  
  .result-header .relevance-score {
    @apply ml-0 self-end;
  }
}

/* Title and Content Styling */
.result-title {
  @apply text-xl font-semibold mb-3 leading-tight;
  color: var(--text-primary);
}

.result-title .result-link {
  @apply text-blue-700 hover:text-blue-800;
  @apply underline decoration-transparent hover:decoration-blue-700;
  @apply transition-all duration-200;
  @apply focus:outline-none focus:ring-2 focus:ring-blue-500/50;
  @apply focus:rounded-sm;
  color: var(--link-color);
}

.result-title .result-link:hover {
  color: var(--link-hover);
}

.result-title .result-link:visited {
  @apply text-purple-700 hover:text-purple-800;
  color: var(--link-visited);
}

.result-content {
  @apply mb-4;
}

.result-excerpt {
  @apply text-gray-700 leading-relaxed mb-4 text-base;
  color: var(--text-secondary);
}

/* Highlighted search terms */
.result-excerpt strong,
.result-excerpt mark {
  @apply bg-yellow-100 text-yellow-800 px-1 rounded font-semibold;
}

/* Taxonomy Tags - Swiss Municipal Style */
.result-metadata {
  @apply mb-4 space-y-2;
}

.taxonomy-category,
.taxonomy-target-group {
  @apply flex flex-wrap items-center gap-2;
}

.taxonomy-label {
  @apply text-sm font-medium text-gray-600 mr-2;
  color: var(--text-muted);
}

.tag {
  @apply inline-flex items-center px-3 py-1 rounded-full text-sm;
  @apply bg-gray-100 text-gray-700 border border-gray-200;
  @apply hover:bg-gray-200 hover:text-gray-800;
  @apply transition-colors duration-200;
  @apply focus:outline-none focus:ring-2 focus:ring-blue-500/50;
  @apply cursor-pointer;
}

.tag--target-group {
  @apply bg-blue-50 text-blue-700 border-blue-200;
  @apply hover:bg-blue-100 hover:text-blue-800;
}

.tag--category {
  @apply bg-green-50 text-green-700 border-green-200;
  @apply hover:bg-green-100 hover:text-green-800;
}

.tag--municipal {
  @apply bg-cyan-50 text-cyan-700 border-cyan-200;
  @apply hover:bg-cyan-100 hover:text-cyan-800;
}

.tag a {
  @apply text-inherit no-underline;
  @apply focus:outline-none;
}

/* Action Footer - Municipal Portal Standards */
.result-actions {
  @apply flex items-center justify-between;
  @apply pt-4 border-t border-gray-100;
}

.btn--municipal {
  @apply bg-blue-600 hover:bg-blue-700 text-white;
  @apply px-6 py-2 rounded-lg font-medium;
  @apply focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2;
  @apply transition-all duration-200;
  @apply inline-flex items-center gap-2;
  @apply min-h-[44px]; /* Accessibility minimum touch target */
  background-color: var(--bruchtal-primary);
}

.btn--municipal:hover {
  transform: translateY(-1px);
  @apply shadow-md;
  background-color: var(--bruchtal-secondary);
}

.btn--municipal .btn-icon {
  @apply ml-2 transition-transform duration-200;
}

.btn--municipal:hover .btn-icon {
  transform: translateX(4px);
}

.municipal-badge {
  @apply inline-flex items-center px-2 py-1 rounded-md text-xs;
  @apply bg-green-50 text-green-700 border border-green-200;
}

.municipal-badge.verified {
  @apply bg-emerald-50 text-emerald-700 border-emerald-200;
}

.municipal-badge .badge-icon {
  @apply mr-1 text-green-600;
}

/* WCAG 2.1 AA Compliance Features */

/* Color Contrast Validation */
.high-contrast {
  --text-primary: #000000;        /* 21:1 on white */
  --text-secondary: #1f2937;      /* 16.94:1 on white */
  --text-muted: #374151;          /* 9.19:1 on white */
  --link-color: #1e40af;          /* 7.64:1 on white */
  --link-hover: #1e3a8a;          /* 9.06:1 on white */
}

/* Focus Indicators for Keyboard Navigation */
.search-result-card *:focus {
  @apply outline-none ring-2 ring-blue-500/50 rounded-sm;
}

/* High contrast focus for better visibility */
@media (prefers-contrast: high) {
  .search-result-card *:focus {
    @apply ring-4 ring-blue-600;
  }
  
  .search-result-card {
    @apply border-2;
  }
  
  .content-type-badge,
  .tag,
  .municipal-badge {
    @apply border-2 font-bold;
  }
}

/* Reduced Motion Support */
@media (prefers-reduced-motion: reduce) {
  .search-result-card,
  .btn--municipal,
  .tag,
  .content-type-badge {
    @apply transition-none;
  }
  
  .search-result-card:hover,
  .btn--municipal:hover {
    transform: none;
  }
  
  .btn--municipal:hover .btn-icon {
    transform: none;
  }
}

/* Responsive Design - Mobile-First */

/* Mobile (320px-640px) */
@media (max-width: 640px) {
  .search-results {
    @apply px-2;
  }
  
  .search-result-card {
    @apply p-4 mb-4;
  }
  
  .result-title {
    @apply text-lg;
  }
  
  .result-actions {
    @apply flex-col gap-3;
  }
  
  .btn--municipal {
    @apply w-full justify-center;
  }
  
  .taxonomy-category,
  .taxonomy-target-group {
    @apply flex-col items-start;
  }
  
  .taxonomy-label {
    @apply mb-1;
  }
}

/* Tablet (641px-1024px) */
@media (min-width: 641px) and (max-width: 1024px) {
  .search-result-card {
    @apply p-5;
  }
  
  .result-header {
    @apply flex-wrap gap-3;
  }
}

/* Desktop (1025px+) */
@media (min-width: 1025px) {
  .search-result-card {
    @apply p-6;
  }
  
  .result-header {
    @apply items-start;
  }
  
  .search-results {
    @apply max-w-5xl;
  }
}

/* Large Desktop (1536px+) */
@media (min-width: 1536px) {
  .search-results {
    @apply max-w-6xl;
  }
  
  .search-result-card {
    @apply p-8;
  }
  
  .result-title {
    @apply text-2xl;
  }
}

/* Performance Optimizations */

/* CSS Containment for better rendering performance */
.search-result-card {
  contain: layout style paint;
}

/* Prevent layout shifts during hover states */
.search-result-card::before {
  content: '';
  @apply absolute inset-0 pointer-events-none;
  border: 2px solid transparent;
  border-radius: inherit;
}

/* Print Styling */
@media print {
  .search-result-card {
    @apply shadow-none border border-gray-400 mb-4;
    break-inside: avoid;
  }
  
  .result-actions,
  .relevance-score {
    @apply hidden;
  }
  
  .content-type-badge,
  .tag,
  .municipal-badge {
    @apply border border-gray-400 text-black bg-white;
  }
  
  .result-link {
    @apply text-black no-underline;
  }
  
  .result-link::after {
    content: ' (' attr(href) ')';
    @apply text-xs text-gray-600;
  }
}

/* Dark Theme Support (if implemented) */
@media (prefers-color-scheme: dark) {
  .search-result-card {
    @apply bg-gray-800 border-gray-700 text-white;
  }
  
  .result-title .result-link {
    @apply text-blue-400 hover:text-blue-300;
  }
  
  .result-excerpt {
    @apply text-gray-300;
  }
  
  .content-type-badge {
    @apply bg-gray-700 text-gray-200 border-gray-600;
  }
  
  .tag {
    @apply bg-gray-700 text-gray-200 border-gray-600;
    @apply hover:bg-gray-600;
  }
  
  .relevance-score {
    @apply bg-gray-700 text-gray-300 border-gray-600;
  }
}

/* Swiss Municipal Portal Specific Enhancements */
.municipality-bruchtal .search-result-card {
  @apply border-l-4 border-l-cyan-500;
}

.municipality-bruchtal .btn--municipal {
  background-color: var(--bruchtal-primary);
}

.municipality-bruchtal .btn--municipal:hover {
  background-color: var(--bruchtal-secondary);
}

.municipality-bruchtal .result-link {
  color: var(--bruchtal-primary);
}

.municipality-bruchtal .result-link:hover {
  color: var(--bruchtal-secondary);
}

/* Loading State */
.search-results.is-loading {
  @apply opacity-50 pointer-events-none;
}

.search-results.is-loading::after {
  content: '';
  @apply fixed inset-0 bg-white/75 flex items-center justify-center z-50;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24'%3E%3Ccircle cx='12' cy='12' r='10' stroke='currentColor' stroke-width='4' class='opacity-25'%3E%3C/circle%3E%3Cpath fill='currentColor' d='M4 12a8 8 0 018-8v8H4z' class='opacity-75'%3E%3C/path%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: center;
  background-size: 2rem;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* Empty Results State */
.search-results-empty {
  @apply text-center py-12 px-4 bg-gray-50 rounded-lg border border-gray-200;
}

.search-results-empty h3 {
  @apply text-lg font-medium text-gray-900 mb-2;
}

.search-results-empty p {
  @apply text-gray-600 mb-4;
}

.search-results-empty .btn--municipal {
  @apply inline-flex;
}

/* Error State */
.search-results-error {
  @apply text-center py-12 px-4 bg-red-50 rounded-lg border border-red-200;
}

.search-results-error h3 {
  @apply text-lg font-medium text-red-900 mb-2;
}

.search-results-error p {
  @apply text-red-700 mb-4;
}

/* Accessibility Enhancements */

/* Screen Reader Support */
.sr-only {
  @apply absolute w-px h-px p-0 -m-px overflow-hidden whitespace-nowrap border-0;
  clip: rect(0, 0, 0, 0);
}

/* Skip Link for Search Results */
.skip-to-results {
  @apply sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4;
  @apply bg-blue-600 text-white px-4 py-2 rounded-md;
  @apply focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2;
}

/* ARIA Live Region for Dynamic Updates */
.search-status-live {
  @apply sr-only;
}

/* Focus Trap for Modal-like Search Interfaces */
.search-focus-trap:focus {
  @apply outline-none;
}

/* Enhanced Link Accessibility */
.result-link[aria-describedby] {
  position: relative;
}

.result-link-description {
  @apply sr-only;
}

/* Touch Device Optimizations */
@media (hover: none) and (pointer: coarse) {
  .search-result-card:hover {
    transform: none;
  }
  
  .btn--municipal:hover {
    transform: none;
  }
  
  /* Larger touch targets */
  .tag,
  .content-type-badge {
    @apply min-h-[44px] px-4 py-2;
  }
}