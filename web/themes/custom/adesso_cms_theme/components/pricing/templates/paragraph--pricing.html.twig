{#
/**
 * @file
 * Pricing paragraph template using paragraph-wrapper component with embed pattern.
 */
#}

{# Pricing paragraph configuration #}
{% set wrapper_theme = paragraph.field_theme.value|default('default') %}
{% set wrapper_spacing = paragraph.field_spacing.value|default('medium') %}
{% set wrapper_tag = 'section' %}
{% set wrapper_css_class = [
  'paragraph',
  'paragraph--type--' ~ paragraph.bundle|clean_class,
  view_mode ? 'paragraph--view-mode--' ~ view_mode|clean_class,
  not paragraph.isPublished() ? 'paragraph--unpublished'
]|join(' ') %}

{# Embed the paragraph-wrapper component using slots #}
{% embed 'adesso_cms_theme:paragraph-wrapper' with {
  theme: wrapper_theme,
  spacing: wrapper_spacing,
  tag: wrapper_tag,
  className: wrapper_css_class,
  attributes: attributes
} %}

{% block prefix %}
  {{ title_prefix }}
  {{ title_suffix }}
{% endblock %}

{% block content %}
  {% embed 'adesso_cms_theme:pricing' with {
    content: content,
    summary: content.field_summary,
    grid_columns: content.field_pricing_cards['#items']|length > 0 ? (content.field_pricing_cards['#items']|length > 3 ? '3' : content.field_pricing_cards['#items']|length ~ '') : '3',
    is_dark: wrapper_theme == 'dark',
  } only %}
    {% block title %}{{ content.field_title }}{% endblock %}
    {% block pre_headline %}{{ content.field_eyebrow }}{% endblock %}
    {% block pricing_cards %}
      {{ content.field_pricing_cards }}
    {% endblock pricing_cards %}
  {% endembed %}
{% endblock %}

{% endembed %}