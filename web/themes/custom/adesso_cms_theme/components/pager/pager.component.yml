$schema: https://git.drupalcode.org/project/drupal/-/raw/HEAD/core/assets/schemas/v1/metadata.schema.json
name: Pager
status: stable
description: |
  Swiss Government Accessible Pagination Component for Municipal Portals.
  
  Implements comprehensive eCH-0059 Version 3 accessibility standards with enhanced
  focus indicators, municipal branding flexibility, and multilingual typography support.
  Designed specifically for Swiss federal and cantonal government portals with 
  zero-tolerance for accessibility violations (penalty avoidance up to 5,000 CHF).

  Phase 1.2 Features:
  - Enhanced 3px focus rings with dual outlines exceeding WCAG 2.1 AA
  - High contrast mode support with automatic color adaptation
  - Municipal branding system for Thalwil, Thalheim, Erlenbach
  - Swiss typography standards with language-specific optimizations
  - Motion sensitivity support (prefers-reduced-motion)
  - Enhanced print styles for government document requirements
  - Mobile-first responsive design for citizen access patterns
  - Dark mode support with proper contrast maintenance

  Accessibility Excellence:
  - Complete ARIA labeling and semantic navigation structure
  - Screen reader optimized with live regions for dynamic updates  
  - Keyboard navigation with enhanced Swiss focus indicators
  - Swiss federal accessibility compliance (eCH-0059 Version 3)
  - Multilingual ARIA label support for German/French/Italian content
  - Progressive enhancement with AJAX loading capabilities

group: Navigation
libraryOverrides:
  css:
    component:
      pager.css: {}
  dependencies:
    - core/drupal
    - core/jquery
    - core/once
props:
  $schema: "https://json-schema.org/draft-07/schema#"
  type: object
  required: ['heading_id', 'current', 'items', 'pagination_metadata']
  additionalProperties: false
  properties:
    heading_id:
      type: string
      title: Heading ID
      description: |
        Unique identifier for the pagination heading element. Used for ARIA labeling
        and associating the navigation landmark with its semantic description.
        Also used as base ID for live region announcements.
      pattern: '^[a-zA-Z][a-zA-Z0-9_-]*$'
      minLength: 3
      maxLength: 64
      examples:
        - 'pagination-main'
        - 'search-pagination'
        - 'blog-pagination'
        - 'municipal-services-pager'
    current:
      type: integer
      title: Current Page
      description: |
        Current active page number (1-based index). Used to highlight the current
        page with aria-current="page" for screen reader accessibility.
      minimum: 1
      maximum: 99999
      examples: [1, 5, 12, 247]
    items:
      type: object
      title: Pagination Items
      description: |
        Complete pagination data structure including page links, navigation buttons,
        and ellipsis indicators. Supports Drupal's standard pager array format.
      required: ['pages']
      properties:
        previous:
          type: ["object", "null"]
          title: Previous Page Link
          description: Previous page navigation link data (omit if on first page)
          additionalProperties: false
          properties:
            href:
              type: string
              format: uri-reference
              title: Previous Page URL
              description: URL for the previous page
              minLength: 1
            title:
              type: ["string", "null"]
              title: Previous Page Title
              description: Descriptive title for previous page link
              default: 'Go to previous page'
              examples:
                - 'Go to previous page'
                - 'Vorherige Seite'
                - 'Page précédente'
            aria_label:
              type: ["string", "null"]
              title: Previous Page ARIA Label
              description: Enhanced ARIA label for screen readers
              examples:
                - 'Go to previous page, page {number}'
                - 'Zur vorherigen Seite, Seite {number}'
        next:
          type: ["object", "null"]
          title: Next Page Link
          description: Next page navigation link data (omit if on last page)
          additionalProperties: false
          properties:
            href:
              type: string
              format: uri-reference
              title: Next Page URL
              description: URL for the next page
              minLength: 1
            title:
              type: ["string", "null"]
              title: Next Page Title
              description: Descriptive title for next page link
              default: 'Go to next page'
              examples:
                - 'Go to next page'
                - 'Nächste Seite'
                - 'Page suivante'
            aria_label:
              type: ["string", "null"]
              title: Next Page ARIA Label
              description: Enhanced ARIA label for screen readers
              examples:
                - 'Go to next page, page {number}'
                - 'Zur nächsten Seite, Seite {number}'
        pages:
          type: object
          title: Page Number Links
          description: |
            Object with page numbers as keys and page data as values.
            Each page entry should contain href for navigation.
          additionalProperties: false
          patternProperties:
            "^[0-9]+$":
              type: object
              additionalProperties: false
              required: ['href']
              properties:
                href:
                  type: string
                  format: uri-reference
                  title: Page URL
                  description: URL for this specific page
                  minLength: 1
                title:
                  type: ["string", "null"]
                  title: Page Link Title
                  description: Optional title attribute for the page link
                  examples:
                    - 'Go to page 1'
                    - 'Gehe zu Seite 1'
                aria_label:
                  type: ["string", "null"]
                  title: Page Link ARIA Label
                  description: Enhanced ARIA label for page links
                  examples:
                    - 'Go to page {number}'
                    - 'Gehe zu Seite {number}'
                is_current:
                  type: boolean
                  title: Is Current Page
                  description: Whether this page is the current active page
                  default: false
          examples:
            - { "1": { "href": "/page/1", "is_current": true }, "2": { "href": "/page/2" } }
        ellipses:
          type: ["object", "null"]
          title: Ellipsis Indicators
          description: |
            Object indicating where ellipsis (...) should be displayed between
            page numbers. Keys are page numbers after which ellipsis should appear.
          additionalProperties: false
          patternProperties:
            "^[0-9]+$":
              type: object
              additionalProperties: false
              properties:
                show:
                  type: boolean
                  title: Show Ellipsis
                  description: Whether to show ellipsis after this page number
                  default: true
                aria_label:
                  type: ["string", "null"]
                  title: Ellipsis ARIA Label
                  description: ARIA label for ellipsis indicators
                  examples:
                    - 'More pages available'
                    - 'Weitere Seiten verfügbar'
                    - 'Plus de pages disponibles'
          examples:
            - { "2": { "show": true }, "8": { "show": true } }
    parameters:
      type: ["string", "null"]
      title: URL Parameters
      description: |
        Additional URL parameters to preserve across pagination (e.g., search queries,
        filters). These will be maintained in all pagination links.
      examples:
        - 'q=search+term'
        - 'category=news&sort=date'
        - 'filter[type]=article&per_page=10'
    pagination_metadata:
      type: object
      title: Pagination Metadata
      description: |
        Comprehensive pagination metadata for advanced navigation, performance optimization,
        and Swiss municipal portal integration. Contains all necessary data for
        accessibility compliance and citizen service optimization.
      required: ['total_items', 'items_per_page', 'total_pages']
      additionalProperties: false
      properties:
        total_items:
          type: integer
          title: Total Items
          description: |
            Total number of items across all pages. Used for result count announcements
            and pagination context. Critical for Swiss accessibility compliance.
          minimum: 0
          examples: [245, 1024, 0]
        items_per_page:
          type: integer
          title: Items Per Page
          description: |
            Number of items displayed per page. Used for navigation calculations
            and performance optimization in municipal portals.
          minimum: 1
          maximum: 100
          default: 10
          examples: [10, 25, 50]
        total_pages:
          type: integer
          title: Total Pages
          description: |
            Total number of pages in the result set. Used for pagination bounds
            and navigation context announcements.
          minimum: 1
          examples: [25, 41, 1]
        start_item:
          type: integer
          title: Start Item Number
          description: |
            The index of the first item on the current page (1-based).
            Used for "Showing X-Y of Z" announcements.
          minimum: 1
          examples: [1, 11, 51]
        end_item:
          type: integer
          title: End Item Number
          description: |
            The index of the last item on the current page (1-based).
            Used for "Showing X-Y of Z" announcements.
          minimum: 1
          examples: [10, 20, 60]
        page_range:
          type: object
          title: Page Range Configuration
          description: |
            Configuration for visible page number range and ellipsis behavior.
            Optimized for Swiss municipal portal navigation patterns.
          additionalProperties: false
          properties:
            adjacency:
              type: integer
              title: Adjacent Pages
              description: Number of pages to show on each side of current page
              minimum: 0
              maximum: 10
              default: 2
              examples: [1, 2, 3]
            max_pages_shown:
              type: integer
              title: Maximum Pages Shown
              description: Maximum number of page links to display at once
              minimum: 3
              maximum: 20
              default: 9
              examples: [7, 9, 11]
            show_first_last:
              type: boolean
              title: Show First/Last Links
              description: Whether to always show first and last page links
              default: true
            ellipsis_handling:
              type: string
              title: Ellipsis Handling
              description: Strategy for displaying ellipsis between page ranges
              enum: ['smart', 'always', 'never']
              default: 'smart'
        performance_settings:
          type: object
          title: Performance Settings
          description: |
            Performance optimization settings for large result sets and
            municipal portal citizen access patterns.
          additionalProperties: false
          properties:
            lazy_loading:
              type: boolean
              title: Enable Lazy Loading
              description: Enable AJAX-based lazy loading for better performance
              default: false
            infinite_scroll:
              type: boolean
              title: Enable Infinite Scroll
              description: Enable infinite scroll functionality
              default: false
            batch_size:
              type: integer
              title: Batch Size
              description: Number of items to load per AJAX request
              minimum: 1
              maximum: 200
              default: 20
              examples: [10, 20, 50]
            preload_adjacent:
              type: boolean
              title: Preload Adjacent Pages
              description: Preload next/previous pages for faster navigation
              default: false
    accessibility_config:
      type: object
      title: Accessibility Configuration
      description: |
        Swiss eCH-0059 Version 3 accessibility configuration with municipal
        compliance settings and multilingual support.
      additionalProperties: false
      properties:
        pagination_label:
          type: ["string", "null"]
          title: Pagination ARIA Label
          description: |
            Custom ARIA label for the pagination navigation landmark.
            Defaults to multilingual municipal standards.
          examples:
            - 'Seitennavigation für Suchergebnisse'
            - 'Navigation de pagination pour résultats'
            - 'Navigazione di paginazione per risultati'
        verbose_labels:
          type: boolean
          title: Enable Verbose Labels
          description: |
            Enable detailed ARIA labels with context information for
            enhanced screen reader accessibility.
          default: true
        live_region_settings:
          type: object
          title: Live Region Configuration
          description: Configuration for ARIA live regions and announcements
          additionalProperties: false
          properties:
            enable_announcements:
              type: boolean
              title: Enable Live Announcements
              description: Enable ARIA live region announcements for navigation
              default: true
            announcement_delay:
              type: integer
              title: Announcement Delay (ms)
              description: Delay before announcing page changes
              minimum: 0
              maximum: 5000
              default: 500
            politeness_level:
              type: string
              title: Live Region Politeness
              description: ARIA live region politeness level
              enum: ['polite', 'assertive', 'off']
              default: 'polite'
        multilingual_labels:
          type: object
          title: Multilingual Label Support
          description: |
            Swiss federal language requirement support for German, French,
            Italian, and English accessibility labels.
          additionalProperties: false
          properties:
            primary_language:
              type: string
              title: Primary Language
              description: Primary language for accessibility labels
              enum: ['de', 'fr', 'it', 'en']
              default: 'de'
            fallback_language:
              type: string
              title: Fallback Language
              description: Fallback language when primary is unavailable
              enum: ['de', 'fr', 'it', 'en']
              default: 'en'
            label_translations:
              type: object
              title: Label Translations
              description: Translation mapping for accessibility labels
              additionalProperties: false
              patternProperties:
                '^(de|fr|it|en)$':
                  type: object
                  additionalProperties: false
                  properties:
                    previous_page:
                      type: string
                      examples: ['Vorherige Seite', 'Page précédente', 'Pagina precedente']
                    next_page:
                      type: string
                      examples: ['Nächste Seite', 'Page suivante', 'Pagina successiva']
                    current_page:
                      type: string
                      examples: ['Aktuelle Seite', 'Page actuelle', 'Pagina corrente']
                    page_of:
                      type: string
                      examples: ['Seite {current} von {total}', 'Page {current} sur {total}', 'Pagina {current} di {total}']
        municipal_theme_support:
          type: object
          title: Municipal Theme Support
          description: |
            Configuration for Swiss municipal theme variations and
            canton-specific accessibility requirements.
          additionalProperties: false
          properties:
            canton:
              type: ["string", "null"]
              title: Canton Code
              description: Swiss canton code for specific accessibility requirements
              pattern: '^[A-Z]{2}$'
              examples: ['ZH', 'BE', 'GE', 'VD']
            municipality:
              type: ["string", "null"]
              title: Municipality Name
              description: Municipality name for branding and compliance
              examples: ['Thalwil', 'Thalheim', 'Erlenbach']
            compliance_level:
              type: string
              title: Compliance Level
              description: Required accessibility compliance level
              enum: ['federal', 'cantonal', 'municipal']
              default: 'federal'
    navigation_context:
      type: object
      title: Navigation Context Configuration
      description: |
        Advanced navigation context settings for enhanced user experience
        and Swiss municipal portal integration.
      additionalProperties: false
      properties:
        skip_navigation:
          type: object
          title: Skip Navigation Settings
          description: Configuration for skip navigation functionality
          additionalProperties: false
          properties:
            enabled:
              type: boolean
              title: Enable Skip Navigation
              description: Enable skip navigation links for accessibility
              default: true
            target_selector:
              type: ["string", "null"]
              title: Skip Target Selector
              description: CSS selector for skip navigation target
              examples: ['#main-content', '.content-main', '#search-results']
        keyboard_shortcuts:
          type: object
          title: Keyboard Shortcuts
          description: Configuration for keyboard navigation shortcuts
          additionalProperties: false
          properties:
            enabled:
              type: boolean
              title: Enable Keyboard Shortcuts
              description: Enable advanced keyboard navigation shortcuts
              default: true
            shortcut_keys:
              type: object
              title: Shortcut Key Mappings
              description: Custom keyboard shortcut mappings
              additionalProperties: false
              properties:
                first_page:
                  type: ["string", "null"]
                  title: First Page Shortcut
                  description: Keyboard shortcut for first page
                  pattern: '^[A-Za-z0-9+]+$'
                  default: 'Ctrl+Home'
                last_page:
                  type: ["string", "null"]
                  title: Last Page Shortcut
                  description: Keyboard shortcut for last page
                  pattern: '^[A-Za-z0-9+]+$'
                  default: 'Ctrl+End'
        focus_management:
          type: object
          title: Focus Management
          description: Advanced focus management for navigation interactions
          additionalProperties: false
          properties:
            restore_focus:
              type: boolean
              title: Restore Focus After Navigation
              description: Restore focus to pagination after content updates
              default: true
            focus_target:
              type: string
              title: Focus Target Strategy
              description: Where to place focus after navigation
              enum: ['pagination', 'content', 'heading', 'smart']
              default: 'smart'
            focus_delay:
              type: integer
              title: Focus Delay (ms)
              description: Delay before setting focus after navigation
              minimum: 0
              maximum: 2000
              default: 200
    display_options:
      type: object
      title: Display Options
      description: |
        Visual display configuration for Swiss municipal portal requirements
        and responsive design optimization.
      additionalProperties: false
      properties:
        responsive_behavior:
          type: string
          title: Responsive Behavior
          description: How pagination adapts to different screen sizes
          enum: ['adaptive', 'collapse', 'scroll', 'minimal']
          default: 'adaptive'
        mobile_breakpoint:
          type: integer
          title: Mobile Breakpoint (px)
          description: Breakpoint for mobile pagination adaptations
          minimum: 320
          maximum: 1024
          default: 768
        show_result_count:
          type: boolean
          title: Show Result Count
          description: Display "Showing X-Y of Z results" information
          default: true
        show_page_size_selector:
          type: boolean
          title: Show Page Size Selector
          description: Display items per page selection dropdown
          default: false
        compact_mode:
          type: boolean
          title: Enable Compact Mode
          description: Use compact pagination layout for small screens
          default: false

# Accessibility compliance documentation
accessibility:
  wcag_level: 'AA'
  wcag_version: '2.1'
  standards:
    - 'eCH-0059 Version 3 (Swiss Federal Accessibility)'
    - 'EN 301 549 (European Accessibility Standard)'
  features:
    - 'Complete ARIA labeling for all interactive elements'
    - 'Semantic HTML5 navigation landmark structure'
    - 'Screen reader optimized with descriptive labels'
    - 'Keyboard navigation with visible focus indicators'
    - 'Live regions for dynamic content announcements'
    - 'Proper contrast ratios and touch target sizes'
    - 'Multilingual ARIA label support (German/French)'
  testing_tools:
    - 'axe-core for automated accessibility testing'
    - 'NVDA/JAWS screen reader compatibility'
    - 'Keyboard-only navigation testing'
    - 'Color contrast analyzer validation'

# Performance considerations
performance:
  bundle_size: 'Optimized CSS/JS with no external dependencies'
  critical_css: 'Inline critical pagination styles'
  lazy_loading: 'Support for AJAX-based lazy loading'
  cache_tags: 'Drupal render cache integration'

# Swiss compliance notes
swiss_compliance:
  ech_0059_version: '3.0'
  multilingual_support: true
  federal_testing: 'Compatible with Swiss federal accessibility testing tools'
  cantonal_variations: 'Supports canton-specific accessibility requirements'
  penalty_compliance: 'Zero-tolerance design prevents 5,000 CHF accessibility violations'

# Schema validation and development integration
schema_validation:
  validation_level: 'strict'
  performance_target: 'Under 10ms validation overhead'
  error_reporting: 'Comprehensive with clear developer messages'
  backward_compatibility: 'Maintained with existing component integrations'
  
# Development environment integration
development:
  storybook_integration: 'Full schema validation in Storybook stories'
  validation_enforcement: 'Automatic validation in development servers'
  error_handling: 'Clear validation failure messages with examples'
  performance_monitoring: 'Schema validation performance tracking'
  
# Municipal portal integration patterns
municipal_integration:
  multi_tenant_support: 'Schema supports multiple Swiss municipality variations'
  customization_points: 'Flexible configuration without schema violations'
  canton_specific_features: 'Extensible for cantonal requirement differences'
  federal_compliance_tracking: 'Built-in compliance validation and reporting'

# Schema evolution and maintenance
schema_maintenance:
  version_compatibility: 'Backward compatible schema evolution strategy'
  deprecation_policy: 'Graceful deprecation with migration guidance'
  validation_updates: 'Regular validation rule updates for compliance changes'
  community_feedback: 'Integration with municipal developer feedback loops'
