{#
/**
 * @file
 * Simple PagedOne Swiper.js Slider component template.
 *
 * Available variables:
 * - items: Array of slider items to display
 * - theme: Theme variation (light|dark)
 * - attributes: Additional HTML attributes
 * - modifier_class: Additional CSS classes
 * - autoplay: Enable autoplay functionality
 * - interval: Time between slides in milliseconds
 * - show_arrows: Display navigation arrows
 * - show_pagination: Display pagination indicators
 */
#}

{# Set up defensive variables with defaults #}
{% set safe_items = items|default([]) %}
{% set safe_theme = theme|default('light') %}
{% set safe_autoplay = autoplay|default(true) %}
{% set safe_interval = interval|default(5000) %}
{% set safe_show_arrows = show_arrows|default(true) %}
{% set safe_show_pagination = show_pagination|default(true) %}

{% set slider_classes = [
  'adesso-slider',
  'swiper',
  'relative',
  'w-full',
  'overflow-hidden',
  'rounded-lg',
  'ct-theme-%s'|format(safe_theme),
  modifier_class|default(''),
] %}

{% set slider_attributes = [
  'data-slider="%s"'|format(safe_autoplay ? 'slide' : 'static'),
  'data-interval="%d"'|format(safe_interval),
  'data-speed="%d"'|format(speed|default(800)),
  'role="region"',
  'aria-label="Interactive image slider"',
  'aria-roledescription="carousel"',
] %}

{# Only render if we have items #}
{% if safe_items and safe_items|length > 0 %}
  <div class="{{ slider_classes|join(' ')|trim }}" {{ slider_attributes|join(' ')|raw }}>
    
    <!-- Swiper Wrapper -->
    <div class="swiper-wrapper">
      {% for item in safe_items %}
        {% if item %}
          <div class="swiper-slide" 
               role="group" 
               aria-roledescription="slide" 
               aria-label="Slide {{ loop.index }} of {{ safe_items|length }}"
               data-slide-index="{{ loop.index0 }}">
            {{ item }}
          </div>
        {% endif %}
      {% endfor %}
    </div>
    
    {% if safe_items|length > 1 %}
      {# Simple Pagination #}
      {% if safe_show_pagination %}
        <div class="swiper-pagination"></div>
      {% endif %}
      
      {# Simple Navigation Arrows #}
      {% if safe_show_arrows %}
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
      {% endif %}
    {% endif %}
  </div>
{% else %}
  {# Fallback for empty slider #}
  <div class="slider-empty p-8 text-center text-gray-500 bg-gray-50 rounded-lg">
    <p>No slides available</p>
  </div>
{% endif %}