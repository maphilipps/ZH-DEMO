name: adesso CMS Complete
description: Complete site setup for adesso CMS with all configurations, modules, and content types synchronized from the current working site state.
type: Site
recipes:
  # Core Drupal CMS recipes for base functionality
  - core/recipes/tags_taxonomy
  - core/recipes/core_recommended_maintenance
  - core/recipes/core_recommended_performance
  - core/recipes/document_media_type
  - core/recipes/basic_html_format_editor
  - core/recipes/full_html_format_editor
  - core/recipes/restricted_html_format
  # Drupal CMS suite recipes
  - drupal_cms_admin_ui
  - drupal_cms_anti_spam
  - drupal_cms_seo_basic
  - drupal_cms_authentication
  - drupal_cms_privacy_basic
  - drupal_cms_remote_video
  - drupal_cms_seo_tools
  - drupal_cms_accessibility_tools
  - drupal_cms_forms
  - drupal_cms_ai
  # Email system
  - easy_email_express
install:
  # Core content management
  - node
  - datetime
  - datetime_range
  - taxonomy
  - user
  - system
  - field
  - field_ui
  - file
  - image
  - text
  - options
  - link
  - telephone
  - editor
  - filter
  - ckeditor5
  - media
  - media_library
  - responsive_image
  - breakpoint
  - views
  - views_ui
  - menu_ui
  - menu_link_content
  - shortcut
  - block
  - block_content
  - path
  - path_alias
  - help
  - contextual
  - history
  - search
  - language
  - locale
  - content_translation
  - workflows
  - content_moderation
  - layout_builder
  - layout_discovery
  - big_pipe
  - dynamic_page_cache
  - page_cache
  - automated_cron
  - dblog
  - update
  - inline_form_errors
  - config
  - mysql
  - navigation
  - package_manager
  - announcements_feed
  - automatic_updates
  - automatic_updates_extensions
  - dashboard
  - project_browser
  
  # AI Integration Suite
  - ai
  - ai_ckeditor
  - ai_content_suggestions
  - ai_external_moderation
  - ai_translate
  - ai_image_alt_text
  - ai_image_bulk_alt_text
  - ai_provider_anthropic
  - ai_provider_openai
  
  # Enhanced Content & Media Management
  - components
  - address
  - entity_reference_revisions
  - paragraphs
  - paragraphs_edit
  - paragraphs_ee
  - paragraphs_features
  - field_group
  - viewfield
  - smart_date
  - svg_image
  - svg_image_responsive
  - crop
  - focal_point
  - webp
  - dropzonejs
  - dropzonejs_eb_widget
  - entity_browser
  - media_bulk_upload
  - media_bulk_upload_dropzonejs
  - default_content
  
  # SEO & Marketing Suite
  - metatag
  - metatag_open_graph
  - metatag_twitter_cards
  - yoast_seo
  - pathauto
  - redirect
  - redirect_404
  - simple_sitemap
  - sitemap
  - robotstxt
  - seo_checklist
  
  # Search & Discovery
  - search_api
  - search_api_autocomplete
  - search_api_db
  - search_api_exclude
  - simple_search_form
  
  # Security & Spam Prevention
  - captcha
  - friendlycaptcha
  - honeypot
  
  # User Experience & Admin Tools
  - gin_toolbar
  - coffee
  - editoria11y
  - frontend_editing
  - preview
  - linkit
  - allowed_formats
  - twig_field_value
  - twig_tweak
  - token
  - token_or
  
  # Workflow & Content Management
  - eca
  - eca_base
  - eca_config
  - eca_content
  - eca_form
  - eca_misc
  - eca_modeller_bpmn
  - eca_render
  - eca_ui
  - eca_user
  - bpmn_io
  - scheduler
  - scheduler_content_moderation_integration
  - node_revision_delete
  - autosave_form
  - trash
  
  # Email & Communication
  - easy_email
  - easy_email_override
  - mailsystem
  - symfony_mailer_lite
  
  # Geolocation & Mapping
  - geofield
  - leaflet
  
  # User Interface & Navigation
  - easy_breadcrumb
  - menu_link_attributes
  - login_emailusername
  - klaro
  - tagify
  - tagify_user_list
  - status_messages
  
  # Development & Enhancement Tools
  - better_exposed_filters
  - selective_better_exposed_filters
  - checklistapi
  - vite
  - webform
  - webform_ui
  - jquery_ui
  - jquery_ui_resizable
  - sam
  - add_content_by_bundle
  
  # Themes
  - claro
  - gin
  - olivero
  - adesso_cms_theme
  - easy_email_theme

config:
  strict: false
  import:
    # Import all module configurations from current site
    adesso_cms_theme: '*'
    ai: '*'
    ai_agents: '*'
    ai_assistant_api: '*'
    ai_ckeditor: '*'
    ai_content_suggestions: '*'
    ai_external_moderation: '*'
    ai_image_alt_text: '*'
    ai_logging: '*'
    ai_provider_anthropic: '*'
    ai_provider_groq: '*'
    ai_provider_openai: '*'
    ai_translate: '*'
    announcements_feed: '*'
    automated_cron: '*'
    automatic_updates: '*'
    autosave_form: '*'
    block: '*'
    block_content: '*'
    captcha: '*'
    claro: '*'
    coffee: '*'
    core: '*'
    crop: '*'
    dashboard: '*'
    dblog: '*'
    dropzonejs: '*'
    easy_breadcrumb: '*'
    easy_email: '*'
    easy_email_override: '*'
    eca: '*'
    editor: '*'
    editoria11y: '*'
    entity_browser: '*'
    field: '*'
    field_group: '*'
    filter: '*'
    focal_point: '*'
    friendlycaptcha: '*'
    frontend_editing: '*'
    geocoder: '*'
    gin: '*'
    gin_toolbar: '*'
    honeypot: '*'
    image: '*'
    jquery_ui: '*'
    key: '*'
    klaro: '*'
    language: '*'
    leaflet: '*'
    linkit: '*'
    login_emailusername: '*'
    mailsystem: '*'
    media: '*'
    menu_link_attributes: '*'
    metatag: '*'
    navigation: '*'
    node: '*'
    node_revision_delete: '*'
    olivero: '*'
    paragraphs: '*'
    paragraphs_edit: '*'
    paragraphs_ee: '*'
    paragraphs_features: '*'
    pathauto: '*'
    redirect: '*'
    responsive_image: '*'
    robotstxt: '*'
    sam: '*'
    scheduler: '*'
    search_api: '*'
    seo_checklist: '*'
    shortcut: '*'
    simple_search_form: '*'
    simple_sitemap: '*'
    sitemap: '*'
    svg_image: '*'
    svg_image_responsive: '*'
    symfony_mailer_lite: '*'
    system: '*'
    tagify: '*'
    taxonomy: '*'
    token: '*'
    token_or: '*'
    trash: '*'
    twig_field_value: '*'
    twig_tweak: '*'
    user: '*'
    viewfield: '*'
    views: '*'
    views_ui: '*'
    vite: '*'
    webform: '*'
    webp: '*'
    workflows: '*'
    yoast_seo: '*'
    media_bulk_upload: '*'

  actions:
    # AI Configuration
    ai.settings:
      simpleConfigUpdate:
        provider: anthropic
        model: claude-3-5-sonnet-20241022
        temperature: 0.2
        max_tokens: 2048
        secret_key: _secure_key_managed_externally_
        
    ai_provider_anthropic.settings:
      simpleConfigUpdate:
        api_key: _secure_key_managed_externally_
        
    ai_provider_openai.settings:
      simpleConfigUpdate:
        api_key: _secure_key_managed_externally_
        
    ai_content_suggestions.settings:
      simpleConfigUpdate:
        enabled_entity_types:
          node:
            - page
            - news
            - event
            - person
            - project
        suggestions_count: 5
        auto_suggest: true
        
    ai_image_alt_text.settings:
      simpleConfigUpdate:
        enabled: true
        provider: anthropic
        batch_size: 10
        auto_generate: true
    
    # Site Configuration
    system.site:
      simpleConfigUpdate:
        name: 'adesso CMS'
        mail: 'admin@adesso.de'
        page.front: '/welcome-adesso-cms'
        
    system.theme:
      simpleConfigUpdate:
        default: adesso_cms_theme
        admin: gin
        
    # Performance Configuration
    system.performance:
      simpleConfigUpdate:
        css.preprocess: false
        js.preprocess: false
        cache.page.max_age: 3600
        
    # User Configuration  
    user.settings:
      simpleConfigUpdate:
        verify_mail: true
        register: admin_only
        cancel_method: user_cancel_block
        
    # Gin Admin Theme Configuration
    gin.settings:
      simpleConfigUpdate:
        preset_accent_color: custom
        accent_color: '#0080c9'
        preset_focus_color: gin
        enable_darkmode: true
        classic_toolbar: vertical
        secondary_toolbar_frontend: true
        
    # Navigation Configuration
    navigation.settings:
      simpleConfigUpdate:
        logo:
          provider: custom
          path: profiles/adesso_cms_installer/images/logo.png
          max:
            filesize: 1048576
            height: 40
            width: 40
            
    # Content Type Permissions
    user.role.content_editor:
      grantPermissionsForEachMediaType:
        - 'create %bundle media'
        - 'delete any %bundle media'
        - 'edit any %bundle media'
      grantPermissions:
        - 'create page content'
        - 'create news content'
        - 'create event content'
        - 'create person content'
        - 'create project content'
        - 'delete page revisions'
        - 'delete any page content'
        - 'edit any page content'
        - 'edit any news content'
        - 'edit any event content'
        - 'edit any person content'
        - 'edit any project content'
        - 'access administration pages'
        - 'access content overview'
        - 'access contextual links'
        - 'access media overview'
        - 'access navigation'
        - 'administer url aliases'
        - 'create url aliases'
        - 'view own unpublished media'
        - 'delete own files'
        - 'revert all revisions'
        - 'view all revisions'
        - 'view the administration theme'
        - 'use text format basic_html'
        - 'use text format full_html'
        - 'use ai content suggestions'
        - 'generate ai image alt text'
        
    user.role.authenticated:
      grantPermissions:
        - 'access shortcuts'
        - 'delete own files'
        - 'view own unpublished content'
        - 'view welcome dashboard'
        
    # Node Settings
    node.settings:
      simpleConfigUpdate:
        use_admin_theme: true
        
    # Package Manager Settings
    package_manager.settings:
      simpleConfigUpdate:
        additional_trusted_composer_plugins:
          - tbachert/spi
          
    # Project Browser Settings
    project_browser.admin_settings:
      simpleConfigUpdate:
        allowed_projects:
          recipes:
            - drupal_cms_accessibility_tools
            - drupal_cms_blog
            - drupal_cms_case_study
            - drupal_cms_events
            - drupal_cms_forms
            - drupal_cms_news
            - drupal_cms_person
            - drupal_cms_project
            - drupal_cms_search
            - drupal_cms_seo_tools
        enabled_sources:
          - drupalorg_jsonapi
          - recipes
        allow_ui_install: true
        
    # Announcements Settings
    announcements_feed.settings:
      simpleConfigUpdate:
        limit: 2
        
    core.menu.static_menu_link_overrides:
      simpleConfigUpdate:
        definitions.announcements_feed__announcement:
          menu_name: admin
          parent: system.admin
          weight: 0
          expanded: false
          enabled: false
          
    # Auto Updates Settings
    automatic_updates.settings:
      simpleConfigUpdate:
        allow_core_minor_updates: true
        
    # SEO Default Settings
    metatag.metatag_defaults.global:
      simpleConfigUpdate:
        tags.canonical_url: '[current-page:url]'
        tags.title: '[current-page:title] | [site:name]'
        tags.description: 'adesso CMS - Enterprise Drupal with AI Integration'
        
    metatag.metatag_defaults.node:
      simpleConfigUpdate:
        tags.abstract: '[node:summary]'
        tags.canonical_url: '[node:url]'
        tags.description: '[node:summary]'
        
    # Frontend Editing Configuration
    frontend_editing.settings:
      simpleConfigUpdate:
        entity_types:
          paragraph:
            - accordion
            - accordion_item
            - block_reference
            - bullet
            - card
            - card_group
            - carousel
            - carousel_item
            - download
            - download_item
            - embed
            - gallery
            - hero
            - logo_collection
            - media
            - newsletter
            - pricing
            - pricing_card
            - sidebyside
            - slider
            - slider_item
            - stats_item
            - text
            - views
        hover_highlight: false
        primary_color: '#0081c9'
        automatic_preview: true
        
    # Page Content Type Configuration
    field.field.node.page.field_paragraphs:
      simpleConfigUpdate:
        label: 'Inhaltselemente'
        description: 'FÃ¼gen Sie Inhaltselemente wie Text, Bilder, Galerien und andere Komponenten hinzu, um Ihre Seite zu gestalten.'
        settings.handler_settings.target_bundles:
          accordion: accordion
          block_reference: block_reference
          card_group: card_group
          carousel: carousel
          download: download
          embed: embed
          gallery: gallery
          hero: hero
          logo_collection: logo_collection
          media: media
          newsletter: newsletter
          pricing: pricing
          sidebyside: sidebyside
          slider: slider
          text: text
          views: views
          
    # Page View Display Configuration
    core.entity_view_display.node.page.default:
      simpleConfigUpdate:
        content.field_paragraphs:
          type: entity_reference_revisions_entity_view
          label: hidden
          settings:
            view_mode: default
            link: ''
          third_party_settings: {}
          weight: 1
          region: content
        hidden.field_paragraphs: null
        hidden.field_featured_image: true
        content.field_featured_image: null
        third_party_settings.layout_builder.enabled: false
        
    # Page Form Display Configuration
    core.entity_form_display.node.page.default:
      simpleConfigUpdate:
        content.field_paragraphs:
          type: paragraphs
          weight: 8
          region: content
          settings:
            title: Inhaltselement
            title_plural: Inhaltselemente
            edit_mode: open
            closed_mode: summary
            autocollapse: none
            autocollapse_default: all
            closed_mode_threshold: 0
            add_mode: dropdown
            form_display_mode: default
            default_paragraph_type: ''
            features:
              duplicate: duplicate
              collapse_edit_all: collapse_edit_all
              add_above: '0'
          third_party_settings: {}
        hidden.field_paragraphs: null
        hidden.layout_builder__layout: true
        
    # Workflow Configuration
    workflows.workflow.basic_editorial:
      addNodeTypes: 
        - page
        - news
        - event
        - person
        - project
        
    # Disable Layout Builder for all content types
    core.entity_view_display.node.news.default:
      simpleConfigUpdate:
        third_party_settings.layout_builder.enabled: false
        third_party_settings.layout_builder.allow_custom: false
    core.entity_view_display.node.event.default:
      simpleConfigUpdate:
        third_party_settings.layout_builder.enabled: false
        third_party_settings.layout_builder.allow_custom: false
    core.entity_view_display.node.person.default:
      simpleConfigUpdate:
        third_party_settings.layout_builder.enabled: false
        third_party_settings.layout_builder.allow_custom: false
    core.entity_view_display.node.project.default:
      simpleConfigUpdate:
        third_party_settings.layout_builder.enabled: false
        third_party_settings.layout_builder.allow_custom: false
        
    # Hide layout builder fields in form displays
    core.entity_form_display.node.news.default:
      simpleConfigUpdate:
        hidden.layout_builder__layout: true
    core.entity_form_display.node.event.default:
      simpleConfigUpdate:
        hidden.layout_builder__layout: true
    core.entity_form_display.node.person.default:
      simpleConfigUpdate:
        hidden.layout_builder__layout: true
    core.entity_form_display.node.project.default:
      simpleConfigUpdate:
        hidden.layout_builder__layout: true