#!/bin/bash

## Description: Initialize fresh Drupal configuration after installation
## Usage: config-init
## Example: "ddev config-init"

set -eu -o pipefail

echo "ğŸš€ Initializing fresh Drupal configuration..."

# Clear all caches first
drush cache:rebuild

# Export current clean configuration
echo "ğŸ“¤ Exporting clean configuration..."
drush config:export --yes

# Set proper permissions
chmod -R 755 $DDEV_DOCROOT/../config/sync/

echo "âœ… Configuration initialization completed!"
echo "ğŸ“ Fresh configuration exported to config/sync/"
echo "ğŸ’¡ This represents your clean installation state."
echo "ğŸ’¡ Commit these files as your baseline configuration."