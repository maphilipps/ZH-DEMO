name: Daily Prepare PRs
on:
    schedule:
        - cron: "0 6 * * *"
jobs:
    prepare-prs:
        runs-on: ubuntu-latest
        permissions:
            contents: write
            pull-requests: write
            issues: write
            id-token: write
            actions: write # Required for Claude to read CI results on PRs
        steps:
            - uses: anthropics/claude-code-action@v1
              with:
                  claude_code_oauth_token: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
                  prompt: "Bitte den aktuellen main Branch in diesen Feature Branch rein mergen. die Claude.md aus dem Main branch wird immer akzeptiert, da sie bereits die Learnings aus allen PRs enth√§lt."
                  claude_args: "--model claude-opus-4-1-20250805"