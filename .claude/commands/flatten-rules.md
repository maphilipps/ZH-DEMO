---
description: Optimize CLAUDE.md prevention rules through systematic triage and compound intelligence synthesis
allowed_tools: Edit,MultiEdit,Write,Read,Glob,Grep,LS,Task(feedback-codifier),Task(knowledge-synthesizer)
---

# Flatten & Optimize CLAUDE.md Prevention Rules

You are tasked with optimizing CLAUDE.md prevention rules through systematic triage and compound intelligence synthesis. Your goal is to transform fragmented individual learnings into an optimized compound intelligence system that maximizes prevention effectiveness and learning velocity.

## Phase 1: Agent-Orchestrated Analysis

First, engage the specialized agents for systematic analysis:

### 1.1 Feedback Analysis
Use @feedback-codifier to analyze recent technical decisions and extract new learnings:
- Identify patterns from recent bug fixes, migrations, or implementations
- Extract prevention rules from successful complex task completions
- Analyze user feedback and dissatisfaction sources for learning opportunities
- Transform reactive fixes into proactive prevention patterns

### 1.2 Knowledge Synthesis  
Use @knowledge-synthesizer to analyze the current CLAUDE.md structure:
- Triage existing rules: Prevention vs Documentation classification
- Identify overlapping and duplicate rules requiring consolidation
- Synthesize meta-patterns from clusters of related rules
- Optimize learning hierarchy and compound intelligence acceleration

## Phase 2: Rule Triage Framework

Based on agent analysis, categorize each rule using these criteria:

### GENUINE PREVENTION RULES ✅ (Keep & Enhance)
- **Measurable ROI**: Rules with quantifiable time savings or error prevention
- **Clear Application**: Rules with specific tools, commands, and implementation patterns  
- **Recurrence Prevention**: Rules that demonstrably prevent recurring issues
- **Compound Intelligence**: Rules that accelerate learning velocity and pattern reuse

### DOCUMENTATION DISGUISED AS RULES ❌ (Convert or Remove)  
- **Project Decisions**: Rules documenting what was done without prevention value
- **Vague Guidance**: Rules without clear application patterns or tools
- **Historical Records**: Rules describing past events rather than future prevention
- **Single-Use Patterns**: Rules without broader applicability or reuse potential

## Phase 3: Meta-Pattern Synthesis

Create higher-level patterns from rule clusters:

### Security Pipeline Integrity
Consolidate XSS prevention, authentication, and security validation patterns

### Systematic Migration Framework  
Merge terminology changes, authentication updates, and infrastructure migrations

### Component Architecture Standards
Unify component proliferation prevention, standardization rules, and refactoring patterns

### Agent Orchestration Protocol
Consolidate complex task coordination, dependency mapping, and specialized assignment patterns

### Performance Validation Framework
Merge baseline measurement, optimization verification, and ROI validation patterns

## Phase 4: Implementation Process

### 4.1 Current State Analysis
```bash
# Analyze CLAUDE.md structure
wc -l CLAUDE.md
grep "### Rule #" CLAUDE.md | wc -l
grep -c "Prevention Rule:" CLAUDE.md
```

### 4.2 Systematic Optimization
1. **Meta-Pattern Creation**: Create 5 meta-patterns from identified clusters
2. **Rule Consolidation**: Merge overlapping rules following synthesis recommendations  
3. **Hierarchy Optimization**: Reorganize structure for learning velocity
4. **Documentation Separation**: Move measurement theory to appendix
5. **Enforcement Enhancement**: Update enforcement section with optimized validation

### 4.3 Compound Intelligence Validation
Ensure optimizations achieve:
- **Cognitive Load Reduction**: 24+ rules → 12 core rules + 5 meta-patterns
- **Learning Velocity**: 40% faster pattern recognition and application
- **Documentation Efficiency**: 75% reduction in maintenance overhead  
- **Pattern Reuse**: 60% better cross-domain learning transfer

## Phase 5: Quality Gates

Verify optimization results meet compound intelligence objectives:

- [ ] **Rule Classification Complete**: All rules categorized as Prevention or Documentation
- [ ] **Duplication Eliminated**: Overlapping rules consolidated or removed
- [ ] **Meta-Patterns Created**: Universal principles extracted from rule clusters
- [ ] **Learning Velocity Enhanced**: Optimized hierarchy accelerates pattern recognition
- [ ] **Compound Intelligence ROI**: 8:1 optimization investment return validated
- [ ] **Enforcement Updated**: Automated validation matching optimized rule structure

## Implementation Commands

Use these systematic approaches during optimization:

```bash
# Rule analysis and consolidation
grep -n "### Rule #" CLAUDE.md
grep -A 5 -B 1 "Prevention Rule:" CLAUDE.md
grep -c "Application:" CLAUDE.md

# Structure optimization validation  
wc -l CLAUDE.md  # Target: ~400 lines focused content
grep "Meta-Pattern" CLAUDE.md | wc -l  # Target: 5 patterns
```

## Expected Outcomes

Transform CLAUDE.md from a growing list of fragmented learnings into an optimized compound intelligence system:

- **Reduced Cognitive Load**: Fewer, more powerful prevention patterns
- **Enhanced Learning Velocity**: Meta-patterns enable faster cross-domain transfer
- **Improved Maintenance**: Consolidated patterns prevent rule proliferation  
- **Accelerated Decision Making**: Clear hierarchy eliminates choice paralysis

Begin with Phase 1 agent orchestration, then proceed systematically through all phases to achieve maximum compound intelligence optimization.