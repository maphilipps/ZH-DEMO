langcode: de
status: open
dependencies: {  }
weight: 0
open: null
close: null
uid: 1
template: false
archive: false
id: event_submission
title: 'Veranstaltung einreichen'
description: 'Formular für eingeloggte Benutzer zur Einreichung von Veranstaltungen'
categories:
  - 'Gemeinde Formulare'
elements: |
  grundinformationen:
    '#type': fieldset
    '#title': 'Grundinformationen zur Veranstaltung'
    '#open': true
    
    title:
      '#type': textfield
      '#title': 'Veranstaltungstitel'
      '#description': 'Geben Sie einen aussagekräftigen Titel für Ihre Veranstaltung ein.'
      '#required': true
      '#maxlength': 255
      '#placeholder': 'z.B. Dorffest Bruchtal 2025'
    
    description:
      '#type': textarea
      '#title': 'Kurzbeschreibung'
      '#description': 'Eine kurze Beschreibung der Veranstaltung (max. 500 Zeichen).'
      '#required': true
      '#maxlength': 500
      '#rows': 3
      '#placeholder': 'Beschreiben Sie kurz, worum es bei der Veranstaltung geht...'
    
    content:
      '#type': text_format
      '#title': 'Detaillierte Beschreibung'
      '#description': 'Ausführliche Informationen zur Veranstaltung.'
      '#format': basic_html
      '#required': false
      '#rows': 10
  
  datum_und_zeit:
    '#type': fieldset
    '#title': 'Datum und Zeit'
    '#open': true
    
    event_date:
      '#type': datetime
      '#title': 'Veranstaltungsdatum und -zeit'
      '#description': 'Wann findet die Veranstaltung statt?'
      '#required': true
      '#date_date_format': 'd.m.Y'
      '#date_time_format': 'H:i'
      '#date_time_element': 'time'
      '#date_time_placeholder': 'HH:MM'
  
  veranstaltungsort:
    '#type': fieldset
    '#title': 'Veranstaltungsort'
    '#open': true
    
    location_name:
      '#type': textfield
      '#title': 'Name des Veranstaltungsortes'
      '#description': 'z.B. Gemeindesaal, Sportplatz, Kirche'
      '#required': true
      '#maxlength': 255
      '#placeholder': 'z.B. Gemeindesaal Bruchtal'
    
    location_address:
      '#type': fieldset
      '#title': 'Adresse'
      
      street:
        '#type': textfield
        '#title': 'Strasse'
        '#required': true
        '#maxlength': 255
        '#placeholder': 'Hauptstrasse'
      
      house_number:
        '#type': textfield
        '#title': 'Hausnummer'
        '#required': false
        '#size': 10
        '#maxlength': 10
        '#placeholder': '42'
      
      postal_code:
        '#type': textfield
        '#title': 'PLZ'
        '#required': true
        '#pattern': '[0-9]{4}'
        '#maxlength': 4
        '#size': 10
        '#placeholder': '8000'
      
      city:
        '#type': textfield
        '#title': 'Ort'
        '#required': true
        '#default_value': 'Bruchtal'
        '#maxlength': 255
  
  zusatzinformationen:
    '#type': fieldset
    '#title': 'Zusätzliche Informationen'
    '#open': false
    
    event_link:
      '#type': url
      '#title': 'Webseite zur Veranstaltung'
      '#description': 'Falls vorhanden, Link zur Veranstaltungswebseite oder Anmeldung.'
      '#required': false
      '#placeholder': 'https://www.example.ch/veranstaltung'
    
    featured_image:
      '#type': managed_file
      '#title': 'Veranstaltungsbild'
      '#description': 'Laden Sie ein Bild oder Poster zur Veranstaltung hoch (max. 10MB, JPG/PNG/GIF).'
      '#required': false
      '#upload_location': 'public://events/images/[date:custom:Y]-[date:custom:m]'
      '#upload_validators':
        file_validate_extensions:
          - 'jpg jpeg png gif'
        file_validate_size:
          - 10485760
      '#sanitize': true
    
    event_file:
      '#type': managed_file
      '#title': 'Zusätzliche Dokumente'
      '#description': 'Flyer, Programm oder andere Dokumente (PDF, max. 5MB).'
      '#required': false
      '#upload_location': 'public://events/documents/[date:custom:Y]-[date:custom:m]'
      '#upload_validators':
        file_validate_extensions:
          - 'pdf'
        file_validate_size:
          - 5242880
      '#sanitize': true
    
    tags:
      '#type': checkboxes
      '#title': 'Kategorien'
      '#description': 'Wählen Sie passende Kategorien für Ihre Veranstaltung.'
      '#options':
        kultur: 'Kultur'
        sport: 'Sport'
        bildung: 'Bildung'
        soziales: 'Soziales'
        politik: 'Politik'
        freizeit: 'Freizeit'
        familie: 'Familie'
        senioren: 'Senioren'
        jugend: 'Jugend'
      '#required': false
  
  kontaktdaten:
    '#type': fieldset
    '#title': 'Kontaktinformationen'
    '#description': 'Diese Informationen werden nicht öffentlich angezeigt, sondern nur für Rückfragen verwendet.'
    '#open': true
    
    contact_name:
      '#type': textfield
      '#title': 'Ihr Name'
      '#required': true
      '#default_value': '[current-user:display-name]'
      '#maxlength': 255
    
    contact_email:
      '#type': email
      '#title': 'Ihre E-Mail-Adresse'
      '#required': true
      '#default_value': '[current-user:mail]'
    
    contact_phone:
      '#type': tel
      '#title': 'Telefonnummer (optional)'
      '#description': 'Für eventuelle Rückfragen.'
      '#required': false
      '#pattern': '(\+41|0)([0-9]{2})([0-9]{3})([0-9]{2})([0-9]{2})'
      '#placeholder': '079 123 45 67'
  
  datenschutz:
    '#type': fieldset
    '#title': 'Datenschutz und Einverständnis'
    '#open': true
    
    privacy_consent:
      '#type': checkbox
      '#title': 'Ich bin damit einverstanden, dass meine Angaben gemäss der Datenschutzerklärung der Gemeinde Bruchtal verarbeitet werden.'
      '#required': true
    
    publishing_consent:
      '#type': checkbox
      '#title': 'Ich bin damit einverstanden, dass die Veranstaltung nach Prüfung auf der Gemeindewebseite veröffentlicht wird.'
      '#required': true

css: ''
javascript: ''
settings:
  ajax: false
  ajax_scroll_top: form
  ajax_progress_type: ''
  ajax_effect: ''
  ajax_speed: null
  page: true
  page_submit_path: '/veranstaltung-einreichen'
  page_confirm_path: '/veranstaltung-eingereicht'
  page_admin_theme: false
  form_title: both
  form_submit_once: true
  form_open_message: ''
  form_close_message: 'Das Formular zur Einreichung von Veranstaltungen ist momentan geschlossen.'
  form_exception_message: ''
  form_previous_submissions: true
  form_confidential: false
  form_confidential_message: ''
  form_disable_remote_addr: false
  form_convert_anonymous: false
  form_prepopulate: false
  form_prepopulate_source_entity: false
  form_prepopulate_source_entity_required: false
  form_prepopulate_source_entity_type: ''
  form_unsaved: true
  form_disable_back: false
  form_submit_back: false
  form_disable_autocomplete: false
  form_novalidate: false
  form_disable_inline_errors: false
  form_required: false
  form_autofocus: false
  form_details_toggle: false
  form_reset: false
  form_access_denied: default
  form_access_denied_title: ''
  form_access_denied_message: ''
  form_access_denied_attributes: {  }
  form_file_limit: ''
  form_attributes: {  }
  form_method: ''
  form_action: ''
  
  share: false
  share_node: false
  share_theme_name: ''
  share_title: true
  share_page_body_attributes: {  }
  
  submission_label: 'Veranstaltungseinreichung'
  submission_exception_message: ''
  submission_locked_message: ''
  submission_log: true
  submission_excluded_elements: {  }
  submission_exclude_empty: false
  submission_exclude_empty_checkbox: false
  submission_views: {  }
  submission_views_replace: {  }
  submission_user_columns: {  }
  submission_user_duplicate: false
  submission_access_denied: default
  submission_access_denied_title: ''
  submission_access_denied_message: ''
  submission_access_denied_attributes: {  }
  
  previous_submission_message: ''
  previous_submissions_message: ''
  
  autofill: false
  autofill_message: ''
  autofill_excluded_elements: {  }
  
  wizard_progress_bar: true
  wizard_progress_pages: false
  wizard_progress_percentage: false
  wizard_progress_link: false
  wizard_progress_states: false
  wizard_start_label: ''
  wizard_preview_link: false
  wizard_confirmation: true
  wizard_confirmation_label: ''
  wizard_auto_forward: true
  wizard_auto_forward_hide_next_button: false
  wizard_keyboard: true
  wizard_track: ''
  wizard_prev_button_label: ''
  wizard_next_button_label: ''
  wizard_toggle: false
  wizard_toggle_show_label: ''
  wizard_toggle_hide_label: ''
  wizard_page_type: container
  wizard_page_title_tag: h2
  
  preview: 0
  preview_label: ''
  preview_title: ''
  preview_message: ''
  preview_attributes: {  }
  preview_excluded_elements: {  }
  preview_exclude_empty: true
  preview_exclude_empty_checkbox: false
  
  draft: authenticated
  draft_multiple: false
  draft_auto_save: true
  draft_saved_message: 'Entwurf gespeichert.'
  draft_loaded_message: 'Entwurf geladen.'
  draft_pending_single_message: 'Sie haben einen ausstehenden Entwurf für dieses Formular.'
  draft_pending_multiple_message: 'Sie haben ausstehende Entwürfe für dieses Formular.'
  
  confirmation_type: page
  confirmation_url: ''
  confirmation_title: 'Veranstaltung erfolgreich eingereicht'
  confirmation_message: |
    <p>Vielen Dank für Ihre Veranstaltungseinreichung!</p>
    <p>Ihre Veranstaltung "<strong>[webform_submission:values:title]</strong>" wurde erfolgreich eingereicht und wird nun von unserem Team geprüft.</p>
    <p>Sie erhalten eine Bestätigungsmail an <strong>[webform_submission:values:contact_email]</strong>.</p>
    <p>Nach der Prüfung wird Ihre Veranstaltung auf der Gemeindewebseite veröffentlicht.</p>
  confirmation_attributes: {  }
  confirmation_back: true
  confirmation_back_label: 'Weitere Veranstaltung einreichen'
  confirmation_back_attributes: {  }
  confirmation_exclude_query: false
  confirmation_exclude_token: false
  confirmation_update: false
  
  limit_total: null
  limit_total_interval: null
  limit_total_message: ''
  limit_total_unique: false
  limit_user: 5
  limit_user_interval: 3600
  limit_user_message: 'Sie können maximal 5 Veranstaltungen pro Stunde einreichen.'
  limit_user_unique: false
  
  entity_limit_total: null
  entity_limit_total_interval: null
  entity_limit_user: null
  entity_limit_user_interval: null
  
  purge: none
  purge_days: null
  
  results_disabled: false
  results_disabled_ignore: false
  results_customize: false
  token_view: false
  token_update: false
  token_delete: false
  
  serial_disabled: false
  
access:
  create:
    roles:
      - authenticated
    users: {  }
    permissions: {  }
  view_any:
    roles:
      - editor
      - administrator
    users: {  }
    permissions: {  }
  update_any:
    roles:
      - editor
      - administrator
    users: {  }
    permissions: {  }
  delete_any:
    roles:
      - administrator
    users: {  }
    permissions: {  }
  purge_any:
    roles:
      - administrator
    users: {  }
    permissions: {  }
  view_own:
    roles:
      - authenticated
    users: {  }
    permissions: {  }
  update_own:
    roles:
      - authenticated
    users: {  }
    permissions: {  }
  delete_own:
    roles:
      - authenticated
    users: {  }
    permissions: {  }
  administer:
    roles:
      - administrator
    users: {  }
    permissions: {  }
  test:
    roles:
      - administrator
    users: {  }
    permissions: {  }
  configuration:
    roles:
      - administrator
    users: {  }
    permissions: {  }

handlers:
  create_event_node:
    id: entity:node
    handler_id: create_event_node
    label: 'Veranstaltung als Node erstellen'
    notes: 'Erstellt eine neue Veranstaltung im Content-Type Event'
    status: true
    conditions: {  }
    weight: 0
    settings:
      operation: create
      entity_type_id: node
      entity_values:
        bundle: event
        langcode: de
        status: 0
        moderation_state: draft
        uid: '[current-user:uid]'
        title: '[webform_submission:values:title]'
        field_description: '[webform_submission:values:description]'
        field_content:
          value: '[webform_submission:values:content:value]'
          format: '[webform_submission:values:content:format]'
        field_event__date:
          value: '[webform_submission:values:event_date:raw]'
        field_event__location_name: '[webform_submission:values:location_name]'
        field_event__location_address:
          country_code: CH
          langcode: de
          address_line1: '[webform_submission:values:street] [webform_submission:values:house_number]'
          postal_code: '[webform_submission:values:postal_code]'
          locality: '[webform_submission:values:city]'
        field_event__link:
          uri: '[webform_submission:values:event_link]'
          title: 'Weitere Informationen'
      entity_revision: false
      states:
        - completed
  
  email_confirmation:
    id: email
    handler_id: email_confirmation
    label: 'Bestätigung an Einreicher'
    notes: 'Sendet eine Bestätigungsmail an den Einreicher'
    status: true
    conditions: {  }
    weight: 1
    settings:
      states:
        - completed
      to_mail: '[webform_submission:values:contact_email]'
      to_options: {  }
      bcc_mail: ''
      bcc_options: {  }
      cc_mail: ''
      cc_options: {  }
      from_mail: noreply@bruchtal.ch
      from_options: {  }
      from_name: 'Gemeinde Bruchtal'
      reply_to: ''
      return_path: ''
      sender_mail: ''
      sender_name: ''
      subject: 'Ihre Veranstaltung wurde eingereicht: [webform_submission:values:title]'
      body: |
        Grüezi [webform_submission:values:contact_name],
        
        Vielen Dank für Ihre Veranstaltungseinreichung!
        
        Veranstaltung: [webform_submission:values:title]
        Datum: [webform_submission:values:event_date]
        Ort: [webform_submission:values:location_name]
        
        Ihre Veranstaltung wird nun von unserem Team geprüft. Sie erhalten eine weitere Nachricht, sobald die Veranstaltung freigegeben wurde.
        
        Bei Fragen wenden Sie sich bitte an veranstaltungen@bruchtal.ch
        
        Mit freundlichen Grüssen
        Gemeinde Bruchtal
      excluded_elements: {  }
      ignore_access: false
      exclude_empty: true
      exclude_empty_checkbox: false
      exclude_attachments: false
      html: true
      attachments: false
      twig: false
      theme_name: ''
      parameters: {  }
      debug: false
  
  email_notification:
    id: email
    handler_id: email_notification
    label: 'Benachrichtigung an Redaktion'
    notes: 'Informiert die Redaktion über neue Veranstaltungseinreichungen'
    status: true
    conditions: {  }
    weight: 2
    settings:
      states:
        - completed
      to_mail: redaktion@bruchtal.ch
      to_options: {  }
      bcc_mail: ''
      bcc_options: {  }
      cc_mail: ''
      cc_options: {  }
      from_mail: noreply@bruchtal.ch
      from_options: {  }
      from_name: 'Veranstaltungsformular'
      reply_to: '[webform_submission:values:contact_email]'
      return_path: ''
      sender_mail: ''
      sender_name: ''
      subject: 'Neue Veranstaltung zur Prüfung: [webform_submission:values:title]'
      body: |
        Eine neue Veranstaltung wurde eingereicht und wartet auf Prüfung.
        
        Veranstaltung: [webform_submission:values:title]
        Datum: [webform_submission:values:event_date]
        Ort: [webform_submission:values:location_name]
        
        Eingereicht von: [webform_submission:values:contact_name] ([webform_submission:values:contact_email])
        
        Zur Prüfung: [site:url]/admin/content/moderated
      excluded_elements: {  }
      ignore_access: false
      exclude_empty: true
      exclude_empty_checkbox: false
      exclude_attachments: false
      html: true
      attachments: false
      twig: false
      theme_name: ''
      parameters: {  }
      debug: false

variants: {  }
libraries: {  }
third_party_settings: {  }